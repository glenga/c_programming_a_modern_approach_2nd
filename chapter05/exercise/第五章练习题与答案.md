# 第五章练习与参考答案



1. 下列代码片段给出了关系运算符和判等运算符的示例。 假设`i`、`j`和`k`都是`int`型变量， 请给出每道题的输出结果。

   #### 答案

   C语言当中的`false`是0，`true`是`1`，所以打印出来的东西都是`0`和`1`。

   | 表达式                                               | 值   |
   | ---------------------------------------------------- | ---- |
   | `i = 2; j = 3; k = i * j == 6; printf("%d", k);`     | 1    |
   | `i = 5; j = 10; k = 1; printf("%d", k > i < j);`     | 1    |
   | `i = 3; j = 2; k = 1; printf("%d", i < j == j < k);` | 1    |
   | `i = 3; j = 4; k = 5; printf("%d", i % j + i < k);`  | 0    |



2. 下列代码片段给出了逻辑运算符的示例。假设`i`、`j`和`k`都是`int`型变量， 请给出每道题的输出结果。

   #### 答案

   | 表达式                                            | 值   |
   | ------------------------------------------------- | ---- |
   | `i = 10; j = 5; printf("%d", !i < j);`            | 1    |
   | `i = 2; j = 1; printf("%d", !!i + !j);`           | 1    |
   | `i = 3; j = 2; k = 1; printf("%d", i && j || k);` | 1    |
   | `i = 1; j = 2; k = 3; printf("%d", i < j  || k);` | 1    |



3. 下列代码片段给出了逻辑表达式的短路行为示例。假设i、j和k都是int型变量， 请给出每道题的输出结果。

   #### 答案

   | 表达式                                                       | 值      |
   | ------------------------------------------------------------ | ------- |
   | `i = 3; j = 4; k = 5; printf("%d", i < j || ++j < k);`       | 1 3 4 5 |
   | `i = 7; j = 8; k = 9; printf("%d", i - 7 && j++ < k); printf("%d %d %d", i, j, k);` | 0 7 8 9 |
   | `i = 7; j = 8; k = 9; printf("%d", (i = j) || (j - k));`     | 1 8 8 9 |
   | `i = 1; j = 1; k = 1; printf("%d", ++i || ++j && ++k);`      | 1 2 1 1 |



4. 编写一个表达式，要求这个表达式根据`i`是否小于、等于或大于`j`，分别取值为`-1`,`0`或`+1`。

   #### 答案

   ```c
   return i < j ? -1 : (i == j ? 0 : 1);
   ```



5. 下面的if语句在C语言中是否合法？

   ```c
   if (n >= 1 <= 10) printf("n is between 0 and 10\n");
   ```

   如果合法，那么当n等于0时语句做些什么？

   #### 答案

   合法，但不会如预期中运行。

   当n等于0时，首先做 n >= 1的判断，返回0，然后与10做比较，返回1。

   相应的会打印出 n is between a and 10



6. 下面的if语句在C语言中是否合法？

   ```c
   if (n == 1 - 10) printf("n is between 1 and 10\n");
   ```

   如果合法，那么当n等于5时语句做些什么？

   #### 答案

   合法，但不会如预期中运行。 当n等于5时，首先做1-10=-9的数学运算，然后判断5==-9是否成立。 上述条件不成立，程序无事发生。



7. 如果`i`的值为17，下面的语句显示的结果是什么？ 如果`i`的值时-17，下面语句显示的结果又是什么？

   ```c
   printf("%d\n", i >= 0 ? i : -i);
   ```

   #### 答案

   语句看着像是返回输入的绝对值，所以输入17或-17都会输出17。



8. 下面的if语句不需要这么复杂，请尽可能地加以简化。

   ```c
   if (age >= 13)
       if (age <= 19)
           teenager = true;
       else
           teenager = false;
   else if (age < 13)
       teenager = false;
   ```

   #### 答案

   阅读程序后，可以发现当年龄大于等于13且小于等于19时为true，其他情形下均为false

   简化后为:
   
   ```c
   teenager = age >= 13 && age <= 19
   ```
   
   

9. 下面两个if语句是否等价？如果不等价，为什么？

   ```c
   if (score >= 90) printf("A");
   else if (score >= 80) printf("B");
   else if (score >= 70) printf("C");
   else if (score >= 60) printf("D");
   else printf("F");
   ```

   ```c
   if (score < 60) printf("F");
   else if (score < 70) printf("D");
   else if (score < 80) printf("C");
   else if (score < 90) printf("B");
   else printf("A");
   ```
   #### 答案
   
   两条语句确实是等价的，都是在建立成绩的分值和等级之间的对应关系。



10. 下面的代码片段的输出结果是什么？（假设`i`是整型变量）

    ```c
    i = 1;
    switch (i % 3){
    	case 0: printf("zero");
    	case 1: printf("one");
    	case 2: printf("two");		
    }
    ```

    #### 答案

    `onetwo`



11. 下面的表格给出了美国佐治亚州的电话区号以及每个地区最大的城市。

    | area_code | city       |
    | --------- | ---------- |
    | 229       | `Albany`   |
    | 404       | `Atlanta`  |
    | 470       | `Atlanta`  |
    | 478       | `Macon`    |
    | 678       | `Atlanta`  |
    | 706       | `Columbus` |
    | 762       | `Columbus` |
    | 770       | `Atlanta`  |
    | 912       | `Savannah` |

    编写一个`switch`语句，其控制表达式是变量`area_code`。 如果`area_code`的值在表中，`switch`语句打印出相应的城市名。 否则`switch`语句显示消息`Area code not recognized`。 使用5.3讨论的方法，让`switch`语句尽可能简单。

    见`excercise5.11.c`

    

