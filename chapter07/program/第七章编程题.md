#  第七章编程题



1. 如果`i*i`超出了`int`类型的最大取值， 那么6.3节的程序`square2.c`将失败（通常会显示奇怪的答案）。 运行该程序，并确定导致失败的`n`的最小值。 尝试把变量`i`的类型改成`short`并再次运行该程序。 （不要忘记更新`printf`函数调用中的转换说明！） 然后尝试改成`long`。 从这些实验中，你能总结出在你的机器上用于存储整数类型的位数是多少吗？



2. 修改6.3节的程序`square2.c`，使每`24`次平方后暂停并显示下列信息：

   ```
   Press Enter to continue...
   ```

   显示完上述信息后，程序应该使用`getchar`函数读入一个字符。 `getchar`函数读到用户录入的回车键才允许程序继续。



3. 修改7.1节的程序`sum2.c`，对`double`型值组成的数列求和。



4. 编写程序可以把字母格式的电话号码翻译成数值格式：

   ```
   Enter phone number: CALLATT
   2255288
   ```

   （如果没有电话在身上， 参考这里给出的字母在键盘上的对应关系： `2=ABC，3=DEF，4=GHI，5=JKL，6=MNO，7=PQRS，8=TUV，9=WXYZ`） 原始电话号码中的非字母字符（例如数字或标点符号）保持不变。

   ```
   Enter phone number: 1-800-COL-LECT
   1-800-265-5328
   ```

   可以假设任何用户输入的字母都是大写字母。



5. 在十字拼字游戏中， 玩家利用小卡片组成单词， 每个卡片包含字母和面值。 面值根据字母稀缺程度的不同而不同。 （面值有：`1——AEILNORSTU， 2——DG，3——BCMP，4——FHVWY，5——K，8——JK，10——QZ`。） 编写程序通过对单词中字母的面值求和来计算单词的值。

   ```
   Enter a word: pitfall
   Scrabble value: 12
   ```

   编写的程序应该允许单词中混合出现大小写字母。 *提示*：使用`toupper`库函数。



6.  编写程序显示`sizeof(int)`、 `sizeof(short)`、 `sizeof(long)`、 `sizeof(float)`、 `sizeof(double)`和 `sizeof(long double)`的值。



7. 修改第三章的编程题6， 使得用户可以对两个分数进行加、减、乘、除运算 （在两个分数之间输入`+`，`-`，`*`或`/`符号）。



8. 修改第5章的编程题8， 要求用户输入12小时制的时间。 输入时间的格式为时:分后跟A、P、AM或PM（大小写均可）。 数值时间和AM/PM之间允许有空白（但不强制要求有空白）。 有效输入的示例如下：

   ```
   1:15P
   1:15PM
   1:15p
   1:15pm
   1:15
   1:15 PM
   1:15 p
   1:15 pm
   ```

   可以假定输入的格式就是上述之一，不需要进行错误判定。



9. 编写程序要求用户输入12小时制的时间，然后用24小时制显示该时间：

   ```
   Enter a 12-hour time: 9:11 PM
   Equivalent 24-hour time: 21:11
   ```

   参考编程题8中关于输入格式的描述。



10. 编写程序统计句子中元音字母（`a`、`e`、`i`、`o`、`u`）的个数：

    ```
    Enter a sentence: And that's the way it is.
    Your sentence contains 6 vowels.
    ```



11. 编写一个程序， 根据用户输入的英文名和姓，先显示姓氏， 其后跟一个逗号，然后显示名的首字母，最后加一个点：

    ```
    Enter a first and last name: Lloyd Fosdick
    Fosdick, L.
    ```

    用户的输入中可能包含空格（名之前，名和姓之间、姓氏之后）



12. 编写程序对表达式求值：

    ```
    Enter am expression: 1+2.5*3
    Value of expression: 10.5
    ```

    表达式中的操作数是浮点数， 运算符是`+`、`-`、`*`和`/`。 表达式从左向右求值（所有运算符的优先级都一样）。



13. 编写程序计算句子的平均词长：

    ```
    Enter a sentence: It was deia yu all over again.
    Average word length: 3.4
    ```

    简单起见，程序把标点符号看做其前面单词的一部分，平均词长显示一个小数位。



14. 编写程序，用牛顿方法计算正浮点数的平方根：

    ```
    Enter a positive number: 3
    Square root: 1.73205
    ```

    设`x`是用户输入的数， 牛顿方法需要先给出`x`平方根的猜测值（我们使用`1`）。 后续的猜测值通过计算`y`和`x/y`的平均值得到。 下表给出了求解3的平方根的过程。

    | x    | y       | x/y     | y和x/y的平均值 |
    | ---- | ------- | ------- | -------------- |
    | 3    | 1       | 3       | 2              |
    | 3    | 2       | 1.5     | 1.75           |
    | 3    | 1.75    | 1.71429 | 1.73214        |
    | 3    | 1.73214 | 1.73196 | 1.73205        |
    | 3    | 1.73205 | 1.73205 | 1.73205        |
    
    注意，y的值逐渐接近x的平方根，为了获得更高的精度，程序中应使用double类型的变量代替float类型的变量。 当y的新旧值之差的绝对值小于0.00001和y的乘积时程序终止 提示：调用`fabs`函数求`double`类型数值的绝对值，为了使用`fabs`函数，需要在程序的开头包含`<math.h>`头。



15. 编程计算正整数的阶乘：

    ```
    Enter a positive integer: 6
    Factorial of 6: 720
    ```

    （a）用`short`类型变量存储阶乘的值。为了正确打印出`n`的阶乘，`n`的最大值是多少？

    （b）用`int`类型变量重复（a）。

    （c）用`long`类型变脸重复（a）。

    （d）如果你的编译器支持`long long`类型，用`long long`类型变量重复（a）。

    （e）用`float`类型变量重复（a）。

    （f）用`double`类型变量重复（a）。

    （g）用`long double`类型变量重复（a）。

    在（e）~（g）几种情况下，程序会显示阶乘的近似值，不一定是准确值。

