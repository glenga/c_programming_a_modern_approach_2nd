# 第七章练习题与答案



1. 给出下列整数常量的十进制值

   1. 077
   2. 0x77
   3. 0XABC

   #### 答案

   1. 63
   2. 119
   3. 2748



2. 下列哪些常量在C语言中不是合法的？ 区分每一个合法的常量是整数还是浮点数。

   (a) 010E2

   (b) 32.1E+5

   (c) 0790

   (d) 100_000

   (e) 2.978e-2

   #### 答案

   (c)和(d)不是合法的常量表达式，(c)是因为在八进制数里面不应该出现9，(d)是因为出现了下划线。 (a)、(b)、(c)都是浮点数。



3. 如果变量`c`是`char`类型，那么下列哪条语句是非法的？

   (a) `i += c; /* i has type int */`

   (b) `c = 2 * c - 1;`

   (c) `putchar(c);`

   (d) `printf(c);`

   #### 答案

   (d)是非法的，使用`printf`应该带上格式符`%c`或者是`%d`。



4. 下列哪条不是书写数65的合法方式？（假设字符集是ASCII）

   (a) `'A'`

   (b) `0b1000001`

   (c) `0101`

   (d) `0x41`

   #### 答案

   (b)，从来没见过这样的表达方式。



5. 下列哪条不是书写数65的合法方式？（假设字符集是ASCII）

   (a) `'A'`

   (b) `0b1000001`

   (c) `0101`

   (d) `0x41`

   #### 答案

   (b)，从来没见过这样的表达方式。



6. 对于下面的数据项，指明`char`、`short`、`int`、`long`类型中哪种类型是足以存储数据的最小类型。

   (a) 一个月的天数

   (b) 一年的天数

   (c) 一天的分钟数

   (d) 一天的秒数

   #### 答案

   (a) 一个月的天数最多为`31`天，`char`就够了。

   (b) 一年的天数最多是`366`天，`short`就够了。

   (b) 一天的分钟数是`1440`分钟，`short`同样够了。

   (d) 一天的秒数为`86400`，应该要用`long`了。



7. 对于下面的字符转义，给出等价的八进制转义。 假定字符集是ASCII，可以参考附录E，其中列出了ASCII字符的数值码。

   (a) `\b`

   (b) `\n`

   (c) `\r`

   (d) `\t`

   #### 答案

   查阅附录E，可以得到相应的数值码: `\b` -> `8`， `\n` -> `10`， `\r` -> `13`， `\t` -> `9`。

   (a) `\010`

   (b) `\012`

   (c) `\015`

   (d) `\011`



8. 重复练习题7，给出等价的十六进制转义。

   #### 答案

   (a) `\b` --> `\x08`

   (b) `\n` --> `\x0a`

   (c) `\r` --> `\x0d`

   (d) `\t` --> `\x09`



9. 假设变量`i`和变量`j`都是`int`类型，那么表达式`i / j + 'a'`是什么类型。

   #### 答案

   `int`类型，因为`'a'`在计算过程中被隐式转换为了`int`类型。



10. 假设变量`i`是`int`类型，变量`j`是`long int`类型， 并且变量`k`是`unsigned int`类型， 那么表达式`i + (int) j * k`是什么类型。

    #### 答案

    变量`j`经过强制类型转换以后已经变成了`int`类型， 与变量`k`做乘法又被隐式转换为`unsigned int`, 最后与`int`类型的变量`i`做加法， 最后应该返回`unsigned int`类型。



11. 假设变量`i`是`int`类型，变量`f`是`float`类型，变量`d`是`double`类型， 那么表达式`i * f / d`是什么类型。

    #### 答案

    double



12.  假设变量`i`是`int`类型，变量`f`是`float`类型，变量`d`是`double`类型， 请解释在执行下列语句时发生了什么转换？

    ```
    d = i * f;
    ```

    #### 答案

    首先是变量`i`和变量`f`相乘，变量`i`通过隐式转换变成`float`类型数据， 最后将`float`类型数据赋值给`double`类型数据，又会隐式转换成`double`类型。



13. 假设程序包含下列声明：

    ```
    char c = '\1';
    short s = 2;
    int i = -3;
    long m = 5;
    float f = 6.5f;
    double d = 7.5;
    ```

    给出下列各个表达式的值和类型。

    (a) `c * i` (c) `f / c` (e) `f - d`

    (b) `s + m` (d) `d / s` (f) `(int) f`

    #### 答案

    (a) `int` `-3`

    (b) `long` `7`

    (c) `float` `6.5f`

    (d) `double` `3.75`

    (e) `double` `-1.0`

    (f) `int` `6`



14. 下列语句是否总是可以正确地计算出`f`的小数部分，假设`f`和`frac_part`都是`float`类型的变量。

    ```
    frac_part = f - (int) f;
    ```

    如果不是，那么出了什么问题？

    #### 答案

    `float`的取值范围要比`int`宽，如果在强制转换过程中超过了`int`的上限，就会发生溢出，应该就拿不到小数部分了。



15. 使用`typedef`创建名为`Int8`、`Int16`和`Int32`的类型， 定义这些类型以便他们可以在你的机器上分别表示`8`位、`16`位和`32`位的整数。

    #### 答案

    首先使用下面的代码查看本地机器上相应数据的长度。

    ```c
    #include <stdio.h>
    
    int main(){
    	printf("Size of char is %zu.\n", sizeof (char));
    	printf("Size of short is %zu.\n", sizeof (short));
    	printf("Size of int is %zu.\n", sizeof (int));
    	printf("Size of long is %zu.\n", sizeof (long));
    
    	return 0;
    }
    ```

    程序运行结果为：

    ```
    Size of char is 1.
    Size of short is 2.
    Size of int is 4.
    Size of long is 8.
    ```

    由此可以给出如下的定义方式（一个字节相当于八个比特，即8位）

    ```c
    typedef char Int8;
    typedef short Int16;
    typedef int Int32;
    ```

