# 第八章练习题参考答案



1. 前面讨论过， 可以用表达式`sizeof(a)/sizeof(a[0])`计算数组元素个数。 表达式`sizeof(a)/sizeof(t)`也可以完成同样的工作， 其中`t`表示数组`a`中元素的类型， 但我们认为这是一种较差的方法。这是为什么呢？

   #### 答案

   因为数组`a`的类型可能会发生变化， 如果使用后一种方法计算数组元素个数的话， 还需要按照实际情况去修改`t`的值。



2. 问与答部分介绍了使用字母作为数组下标的方法。 请描述一下如何使用数字（字符格式的）作为数组的下标。

   #### 答案

   ```c
   array[ch - '0']
   ```



3.  声明一个名为`weekend`的数组， 其中包含`7`个`bool`值， 要求用一个初始化式把第一个和最后一个值置为`true`， 其它值都置为`false`。

   #### 答案

   ```c
   bool weekend[7] = {true, false, false, false, false, false, true};
   ```



4. (`c99`)重复练习题3，但这次用指定初始化式。要求初始化式尽可能地简短。

   #### 答案

   ```c
   bool weekend[] = {true, [6] = true};
   ```



5. 斐波那契数为`0,1,1,2,3,5,8,13,...`。 其中每个数是其前面两个数的和。编写一个程序片段， 声明一个名为`fib_number`的长度为`40`的数组， 并填入前`40`个斐波那契数。 *提示*：先填入前两个数，然后用循环计算其余的数。

   #### 答案

   ```c
   #include <stdio.h>
   #define N 40
   
   int main() {
   	int fib_number[N] = {0, 1};
   	for (int i = 2; i < N; i++){
   		fib_number[i] = fib_number[i-1] + fib_number[i-2];
   	}
   
   	return 0;
   }
   ```



6. 计算器，电子手表和其它电子设备经常依靠七段显示器进行数值的的输出， 为了组成数字，这类设备需要打开`7`个显示段的某些部分， 同时关闭其它部分。

   ```
    _        _    _         _    _    _    _    _ 
   | |   |   _|   _|  |_|  |_   |_     |  |_|  |_|
   |_|   |  |_    _|    |   _|  |_|    |  |_|   _|
   ```

假设需要设置一个数组来记住显示每个数字时需要打开的显示段。 各显示段的编号如下所示： ![img](D:\2_soucre\c_programming_a_modern_approach\image\image.png)

下面是数组的可能形式，每一行表示一个数字：

```c
const int segments[10][7] = {{1, 1, 1, 1, 1, 1, 0}, ...};
```

####  答案

```c
const int segments[10][7] = {
	{1, 1, 1, 1, 1, 1, 0},
	{0, 1, 1, 0, 0, 0, 0},
	{1, 1, 0, 1, 1, 0, 1},
	{1, 1, 1, 1, 0, 0, 1},
	{0, 1, 1, 0, 0, 1, 1},
	{1, 0, 1, 1, 0, 1, 1},
	{1, 0, 1, 1, 1, 1, 1},
	{1, 1, 1, 0, 0, 0, 0},
	{1, 1, 1, 1, 1, 1, 1},
	{1, 1, 1, 1, 0, 1, 1},
};
```



7. 利用8.2节的简化方法， 尽可能地缩短练习题6中数组`segments`的初始化式。

   #### 答案

   ```c
   const int segments[10][7] = {
   	{1, 1, 1, 1, 1, 1},
   	{0, 1, 1},
   	{1, 1, 0, 1, 1, 0, 1},
   	{1, 1, 1, 1, [6] = 1},
   	{0, 1, 1, [5] = 1, [6] = 1},
   	{1, 0, 1, 1, 0, 1, 1},
   	{1, 0, 1, 1, 1, 1, 1},
   	{1, 1, 1},
   	{1, 1, 1, 1, 1, 1, 1},
   	{1, 1, 1, 1, 0, 1, 1},
   };
   ```



8. 为一个名为`temperature_readings`的二维数组编写声明。 该数组存储一个月中每小时的温度读数。 简单起见，假设每个月有30天， 数组的每一行对应一个月的每一天， 每一列对应一天中的小时数。

   #### 答案

   ```c
   float temperature_readings[30][24];
   ```



9. 利用练习题8中的数组， 编写一段程序计算一个月的平均温度， 对一个月中每一天和一天中的每个小时取平均。

   #### 答案

   ```c
   float result = 0;
   for (int i = 0; i < 30; i++){
       for (int j = 0; j < 24; j++){
           result += temperature_readings[i][j];
       }
   }
   printf("average temperature is %f\n", result / (30 * 24));
   ```



10. 为一个`8*8`的字符数组编写声明， 数组名为`chess_board`。 用一个初始化把下列数据放入数组（每个字符对应一个数组元素）：

    ```
    r n b q k b n r
    p p p p p p p p
      .   .   .   .
    .   .   .   .
      .   .   .   .
    .   .   .   .
    P P P P P P P P
    R N B Q K B N R
    ```

    #### 答案

    ```c
    char chess_board[8][8] = {
    	{'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'},
    	{'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p'},
    	{' ', '.', ' ', '.', ' ', '.', ' ', '.'},
    	{'.', ' ', '.', ' ', '.', ' ', '.', ' '},
    	{' ', '.', ' ', '.', ' ', '.', ' ', '.'},
    	{'.', ' ', '.', ' ', '.', ' ', '.', ' '},
    	{'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'},
    	{'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'}
    };
    ```



11. 为一个`8x8`的字符数组编写声明， 数组名为`checker_board`。 然后用一个循环把下列数据写入数组，每个字符对应一个数组元素。

    ```
    B R B R B R B R
    R B R B R B R B
    B R B R B R B R
    R B R B R B R B
    B R B R B R B R
    R B R B R B R B
    B R B R B R B R
    R B R B R B R B
    ```

    *提示*：如果`i+j`为偶数，则`i`行`j`列的元素为`B`。

#### 答案

```c
char element, checker_board[8][8];
for (int i = 0; i < 8; i++){
	for (int j = 0; j < 8; j++){
		if ((i + j) % 2){
			element = 'R';
		} else {
			element = 'B';
		}
		checker_board[i][j] = element;
	}
}
```

