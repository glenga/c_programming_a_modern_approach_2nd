# 第四章练习题与答案



1. 给出下列程序片段的输出结果。假设`i`、`j`和`k`都是`int`型变量。

   #### 答案

   | 表达式                                                      | 值   |
   | ----------------------------------------------------------- | ---- |
   | `i = 5; j = 3; printf("%d %d", i / j, i % j);`              | 1 2  |
   | `i = 2; j = 3; printf("%d", (i + 10) % j);`                 | 0    |
   | `i = 7; j = 8; k = 9; printf("%d", (i + 10) % k / j);`      | 1    |
   | `i = 1; j = 2; k = 3; printf("%d", (i + 5) % (j + 2) / k);` | 0    |

   

2. 如果`i`和`j`都是正整数，`(-i) / j`的值和`-(i/j)`的值是否总一样？验证你的答案。

   #### 答案

   `C99`标准规定了`(-i)/j`要向零取整，`i/j`也是向零取整，所以这两个结果应该总是一样的。

   `C89`标准的话就没有办法确认结果是否能够保持一致了，`C99`都要过时了，能不用`C89`就不用`C89`了吧。

   

3. 下列表达式在`C89`中的值是多少？

   #### 答案

   | 表达式  | 值    |
   | ------- | ----- |
   | 8/5     | 1     |
   | -8/5    | -1 -2 |
   | 8 / -5  | -1 -2 |
   | -8 / -5 | 1 2   |

   

4. 对`C99`重复上题。

   #### 答案

   | 表达式 | 值   |
   | ------ | ---- |
   | 8/5    | 1    |
   | -8/5   | -1   |
   | 8/-5   | -1   |
   | -8/-5  | 1    |



5. 下列表达式在`C89`中的值是多少？

    #### 答案

   | 表达式  | 值   |
   | ------- | ---- |
   | 8 % 5   | 3    |
   | -8 % 5  | -3 5 |
   | 8 % -5  | 3 -5 |
   | -8 % -5 | 3 5  |



6. 对`C99`重复上题

    #### 答案

   | 表达式  | 值   |
   | ------- | ---- |
   | 8 % 5   | 3    |
   | -8 % 5  | -3   |
   | 8 % -5  | 3    |
   | -8 % -5 | -3   |

​	

7. 本章计算`UPC`校验位的方法最后几步是： 把总的结果减去1，相减后的结果除以10取余数，用9减去余数。 换成下面的步骤也可以：总的结果除以10取余数，用10减去余数，这样做为什么可行？

   #### 答案

   首先写出第一种方法的数学表达式： 假设总的结果为a，则有 9 - (a - 1) % 10 做简单的数学变换有： 9 - a % 10 + 1 % 10 -> 10 - a % 10 很明显，两种方法在数学上是等价的，自然前者可行，后者同样可行。



8. 如果把表达式 `9 - ((total - 1) % 10)` 改成 `(10 - (total % 10)) % 10`, `upc.c`程序是否依然正确？

    #### 答案

   第7题已经说明了两种表达式在数学上是等价的， 在程序上是否等价就要看这些式子会不会在运行过程中出现一些古怪的现象， 很显然，这里唯一可能出现古怪现象的地方就是%的左右两个数字可能符号不一样， 然后出来的结果不确定，但是很显然，`upc.c`程序中的数都只能是正数， 不会出现问题，程序上是完全等价的。



9. 给出下列程序片段的输出结果。假设i、j和k都是int型变量。

   #### 答案
   
   | 表达式                                                       | 值     |
   | ------------------------------------------------------------ | ------ |
   | `i = 7; j = 8; i *= j + 1; printf("%d %d", i, j);`           | 63 8   |
   | `i = j = k = 1; i += j += k; printf("%d %d %d", i, j, k);`   | 3 2 1  |
   | `i = 1; j = 2; k = 3; i -= j -= k; printf("%d %d %d", i, j, k);` | 2 -1 3 |
   | `i = 2; j = 1; k = 0; i *= j *= k; printf("%d %d %d", i, j, k);` | 0 0 0  |



10. 给出下列程序片段的输出结果。假设i、j都是int型变量。

    #### 答案
    
    | 表达式                                                       | 值    |
    | ------------------------------------------------------------ | ----- |
    | `i = 6; j = 8; j = i += i; printf("%d %d", i, j);`           | 12 12 |
    | `i = 5; j = (i -= 2) + 1; printf("%d %d", i, j);`            | 3 4   |
    | `i = 7; j = 6 + (i = 2.5); printf("%d %d", i, j);`           | 2 8   |
    | `i = 2; j = 8; j = (i = 6) + (j = 3); printf("%d %d", i, j);` | 6 9   |



11. 给出下列程序片段的输出结果。假设`i`、`j`和`k`都是`int`型变量。

    #### 答案
    
    | 表达式                                                       | 值      |
    | ------------------------------------------------------------ | ------- |
    | `i = 1; printf("%d ", i++ - 1); printf("%d ", i);`           | 0 2     |
    | `i = 10; j = 5; printf("%d ", i++ - ++j); printf("%d %d", i, j);` | 4 11 6  |
    | `i = 7; j = 8; printf("%d ", i++ - --j); printf("%d %d", i, j);` | 0 8 7   |
    | `i = 3; j = 4; k = 5; printf("%d ", i++ - j++ + --k); printf("%d %d %d", i, j, k);` | 3 4 5 4 |



12. 给出下列程序片段的输出结果。 假设`i`、`j`都是`int`型变量。

    #### 答案
    
    | 表达式                                           | 值   |
    | ------------------------------------------------ | ---- |
    | `i = 5; j = ++i * 3 - 2; printf("%d %d", i, j);` | 6 16 |
    | `i = 5; j = 3 - 2 * i++; printf("%d %d", i, j);` | 6 -7 |
    | `i = 7; j = 3 * i-- + 2; printf("%d %d", i, j);` | 6 23 |
    | `i = 7; j = 3 + --i * 2; printf("%d %d", i, j);` | 6 15 |



13. 表达式`++i`和`i++`中只有一个是与表达式`（i += 1）`完全相同的，是哪一个呢？

    #### 答案

    是`++i`，表达式`i += 1`的返回值是`i+1`，`i++`的返回值是`i`，两者显然不同。



14. 添加圆括号，说明C语言编译器如何解释下列表达式：

    a. `a * b - c * d + e`

    b. `a / b % c / d`

    c. `- a - b + c - + d`

    d. `a * - b / c - d`

    #### 答案

    a. `(((a * b) - (c * d)) + e)`

    b. `(((a / b) % c) / d)`

    c. `((((- a) - b) + c) - (+ d))`

    d. `(((a * (- b)) / c) - d)`



15. 给出下列每条表达式语句执行以后`i`和`j`的值，假设`i`的初始值为`1`，`j`的初始值为`2`.

    #### 答案
    
    | 表达式       | 值   |
    | ------------ | ---- |
    | `i += j;`    | 3 2  |
    | `i--;`       | 0 2  |
    | `i * j / 1;` | 1 2  |
    | `i % ++j;`   | 1 3  |