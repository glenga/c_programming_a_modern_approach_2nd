# 第十一章  指针



- ####  指针的概念

  直接即地址（值），也需要开辟内存空间存放。

  

- #### 取地址运算符

  为找到变量的地址，使用 **&（取地址）**运算符。 

  

- #### 间接寻址运算符

  为了获得对指针所指向对象的访问，使用 ***（间接寻址）**运算符。

  

- #### 指针定义与间接寻址运算符的困扰

  深刻理解变量的定义，形参，左值和右值的概念，方能解惑。

  

- #### 永远不要将返回指向自动局部变量的指针

  ```c
  int *foo(void){
      int i;
      ...
      return &i; // 函数返回后， 指针i将是无效的
  }
  ```

  c语言函数调用只支持传值（**传递的指针参数也仅仅是地址值**），如果需要对外部数据进行修改，正确的做法是将外部数据的地址值（指针）作为函数的参数进行传递, 而不是把指针作为返回值。

  ```c
  
  void foo(int *i){
      // 间接寻址进行修改
      *i = 100;
      ...
  }
  
  int main(){
      int i;
      // 取地址运算符传递地址值（指针）给函数
      foo(&i);
      ...
  }
  ```

  

- #### 用 `const` 保护参数

  下面的声明，第一种常用。表明p指向的是一个常量，不可改变常量的值，但可以修改p的指向，指向另一个常量：

  ```c
  void foo(const int *p);          /* p指向的整数不可修改 */
  void foo(int * const p);         /* p指针无法重新赋值 */ 
  void foo(const int * const p);   /* 同时保护上面两种情况，什么都改不了了 */
  ```

  `const` 修饰的对象就是要保护的对象。
