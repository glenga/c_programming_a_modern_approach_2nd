# 第六章练习题参考答案



1. 下列程序片段的输出是什么？

   ```c
   i = 1;
   while (i <= 128){
   	printf("%d ", i);
   	i *= 2;
   }
   ```

   #### 答案：

   ```
   1 2 4 8 16 32 64 128
   ```



2. 下列程序片段的输出是什么？

   ```c
   i = 9384;
   do {
   	printf("%d ", i);
   	i /= 10;
   }	while (i > 0);
   ```

   #### 答案：

   ```
   9384 938 93 9 
   ```



3. 下面这条for语句的输出是什么？

   ```c
   for (i = 5, j = i -1; i > 0, j > 0; --i, j = i - 1)
   	printf("%d ", i);
   ```

   #### 答案：

   ```
   5 4 3 2 
   ```



4. 下面哪条语句和其他两条语句不等价（假设循环体都是一样的）

   a. `for (i = 0; i < 10; i++)`

   b. `for (i = 0; i < 10; ++i)`

   c. `for (i = 0; i++ < 10; )`

   #### 答案：b

   `for`括号内的内容可以分为三部分， 其中的第一部分都是完全相同的， 第二部分也是完全相同的， 因为`i++ < 10`实际上做的判断也是 `i < 10`。

   如果有差别的话， 那肯定是出现在第三部分。 第三部分是循环体做完以后执行的操作 前两个语句其实就是一样的， 第三个语句就不一样了， 它的第三部分是空的， 在循环体执行完毕以后啥也没干。 但是它也确实做了`i`自增`1`的操作， 这个自增是在循环体执行之前就完成了的。 那么循环体里面用到的`i`这个变量的话， 第三个语句用到的`i`会比前两个语句大`1`。



5. 下面哪条语句和其他两条语句不等价（假设循环体都是一样的）

   a) `while (i < 10) { }`

   b) `for (; i < 10;) { }`

   c) `do { } while (i < 10);`

   #### 答案：c

   显然第三条语句是不一样的，因为无论条件判断如何，循环体都会执行一次。



6. 把练习题1中的程序判断改写为一条`for`语句

   #### 答案：

   ```c
   for (int i = 1; i <= 128; i *= 2) printf("%d ", i);
   ```



7. 把练习题2中的程序判断改写为一条`for`语句

   #### 答案：

   ```c
   for (int i = 9384; i > 0; i /= 10) printf("%d ", i);
   ```
   
   



8. 下面这条for语句的输出是什么？

   ```
   for (i = 10; i >= 1; i /= 2) printf("%d ", i++);
   ```

   #### 答案

   10 5 3 1 1 1 ...

   这里面的1会一直不停输出



9. 把练习题8中的`for`语句改写成一条等价的`while`语句， 除了`while`循环本身以外，还需要一条语句。

   #### 答案

   ```c
   int i = 10;
   while (i >= 1){
   	printf("%d ", i++);
   	i /= 2;
   }
   ```
   
   



10. 说明如何使用等价的`goto`语句替换`continue`语句

    #### 答案

    原有的循环体可能是这个样子的

    ```
    while (condition1) {
    	if (condition2) {
    		continue;
    	}
    }
    ```

    `continue`完成的工作其实就是跳过剩余所有的循环体， 直接把函数执行点放到循环体的尾巴上， 使用`goto`完成这一目标其实也非常简单， 就在循环体的尾巴上放一个标签， 然后把`continue`改写成`goto label;`就行了，如下所示。

    ```c
    while (condition1) {
        if (condition2) {
            goto here;
    	}
    
    	here: ;
    }
    ```



11. 下列程序片段的输出是什么？

    ```c
    sum = 0;
    for (i = 0; i < 10; i++){
    	if (i % 2) continue;
    	sum += i;
    }
    ```

    #### 答案：

    20



12. 下面的素数判定循环作为示例出现在6.4节中：

    ```c
    for (d = 2; d < n; d++) {
    	if (n % d == 0) {
    		break;
    	}
    }
    ```

    这个循环不是很高效，没有必要用`n`除以`2~n-1`的所有数来判断它是否为素数。 事实上，只需要检查不大于n的平方数的除数，利用这一点来修改该循环。 提示：不要试图计算出n的平方根，用`d*d`和`n`进行比较。

    #### 答案

    ```c
    for (d = 2; d * d <= n; d++) {
    	if (n % d == 0) {
    		break;
    	}
    }
    ```
    
    



13. 重写下面的循环，使其循环体为空

    ```c
    for (n = 0; m > 0; n++) m /= 2;
    ```

    #### 答案

    ```
    for (n = 0; m > 0; m /= 2, n++) ;
    ```
    
    



14. 找出下面程序片段中的错误并修正

    ```c
    if (n % 2 == 0);
    	printf("n is even\n");
    ```

    #### 答案

    第一个分号是多余的，会直接执行`printf`，而不管判断条件究竟是怎么样的。

